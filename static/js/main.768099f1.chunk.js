(this["webpackJsonpreact-kabzda-1"]=this["webpackJsonpreact-kabzda-1"]||[]).push([[0],{11:function(e,t,a){e.exports={navbar:"Navbar_navbar__3pUxa",links:"Navbar_links__r7s2h",links_link:"Navbar_links_link__2kfIH",active:"Navbar_active__2lb9m"}},125:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return i}));var n=a(46),r=a(4),s={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Andrey"},{id:3,name:"Sveta"},{id:4,name:"Sasha"},{id:5,name:"Viktor"},{id:6,name:"VAlera"},{id:7,name:"Dimych"},{id:8,name:"Andrey"},{id:9,name:"Sveta"},{id:10,name:"Sasha"},{id:11,name:"Viktor"},{id:12,name:"VAlera"},{id:13,name:"Dimych"},{id:14,name:"Andrey"},{id:15,name:"Sveta"},{id:16,name:"Sasha"},{id:17,name:"Viktor"},{id:18,name:"VAlera"}],messagesData:[{user:"",id:1,message:"HOho"},{user:"",id:2,message:"Loldso Loldso Loldso"},{user:"",id:3,message:"Hasah"},{user:"",id:4,message:"lrnmrd"},{user:"me",id:5,message:"sebsdern sebsdern sebsdern"},{user:"me",id:6,message:"privet"},{user:"me",id:7,message:"ytop"},{user:"me",id:8,message:"Andrey"},{user:"",id:9,message:"Sveta"},{user:"",id:10,message:"Sasha"},{user:"",id:11,message:"Viktor hi"},{user:"me",id:12,message:"VAlera"},{user:"",id:13,message:"HOho"},{user:"me",id:14,message:"Loldso Loldso Loldso"},{user:"me",id:15,message:"Hasah"},{user:"me",id:16,message:"lrnmrd"},{user:"me",id:17,message:"sebsdern sebsdern sebsdern"},{user:"",id:18,message:"privet"},{user:"",id:19,message:"ytop"},{user:"",id:20,message:"Andrey"},{user:"me",id:21,message:"Sveta"},{user:"me",id:22,message:"Sasha"},{user:"",id:23,message:"Viktor hi"},{user:"",id:24,message:"VAlera"},{user:"",id:25,message:"HOho"},{user:"me",id:26,message:"Loldso Loldso Loldso"},{user:"me",id:27,message:"Hasah"},{user:"me",id:28,message:"lrnmrd"},{user:"me",id:29,message:"sebsdern sebsdern sebsdern"},{user:"",id:30,message:"privet"},{user:"",id:31,message:"ytop"},{user:"",id:32,message:"Andrey"},{user:"me",id:33,message:"Sveta"},{user:"",id:34,message:"Sasha"},{user:"",id:35,message:"Viktor hi"},{user:"me",id:36,message:"VAlera"}],newMessageText:""},o=function(){return{type:"dialogs/ADD-MESSAGE"}},i=function(e){return{type:"dialogs/UPDATE-NEW-MESSAGE-TEXT",newText:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogs/ADD-MESSAGE":var a={user:"me",id:e.messagesData.length+1,message:e.newMessageText};return Object(r.a)(Object(r.a)({},e),{},{messagesData:[].concat(Object(n.a)(e.messagesData),[a]),newMessageText:""});case"dialogs/UPDATE-NEW-MESSAGE-TEXT":return Object(r.a)(Object(r.a)({},e),{},{newMessageText:t.newText});default:return e}}},131:function(e,t,a){e.exports={profile:"Profile_profile__o3WlU"}},132:function(e,t,a){e.exports={post:"Post_post__ELcTj"}},133:function(e,t,a){e.exports={lds_ellipsis:"Loader_lds_ellipsis__1yTw7",lds_ellipsis1:"Loader_lds_ellipsis1__12qeU",lds_ellipsis2:"Loader_lds_ellipsis2__3jMos",lds_ellipsis3:"Loader_lds_ellipsis3__seIP_"}},134:function(e,t){e.exports="data:image/png;base64,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"},136:function(e,t,a){e.exports={linePreloader:"loginLoader_linePreloader__f4eDQ",scroll:"loginLoader_scroll__1skOQ"}},137:function(e,t,a){e.exports=a.p+"static/media/forest.3f510ca0.jpg"},164:function(e,t,a){e.exports=a(289)},169:function(e,t,a){},19:function(e,t,a){e.exports={users:"Users_users__2_P3b",pagesCountWrapper:"Users_pagesCountWrapper__3d4NP",page:"Users_page__1TKLp",selectedPage:"Users_selectedPage__2a81y",startPage:"Users_startPage__3aURe",endPage:"Users_endPage__5uDFu"}},20:function(e,t,a){e.exports={loginWrapper:"Login_loginWrapper__14yTg",loginFormWrapper:"Login_loginFormWrapper__3jYjw",form:"Login_form__3BgU8",loginText:"Login_loginText__3WKhP",checkbox:"Login_checkbox__2Aqtt",inputs:"Login_inputs__1Jh0r",submitBtn:"Login_submitBtn__1iXOB",error:"Login_error__3RygC",errorLogin:"Login_errorLogin__2B_38"}},24:function(e,t,a){e.exports={userContainer:"User_userContainer__1nhsu",avatar:"User_avatar__1qR7n",avatar_img:"User_avatar_img__v8IKA",infoContainer:"User_infoContainer__3O5PT",data:"User_data__87z1Y",followBtn:"User_followBtn__2uUqn",subscribe:"User_subscribe__2TMJn",unsubscribe:"User_unsubscribe__CvHt6"}},27:function(e,t,a){e.exports={profile__avatar:"Avatar_profile__avatar__duTme",avatar:"Avatar_avatar__q9EBU",fullName:"Avatar_fullName__pfrrV",lookFJ:"Avatar_lookFJ__3LWuQ",lookFJD:"Avatar_lookFJD__3iMLX",aboutMe:"Avatar_aboutMe__2AVwC",bold:"Avatar_bold__2hKPz"}},289:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);a(95),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s,o=a(65),i=a.n(o),u=(a(169),a(30)),c=a(31),l=a(34),p=a(33),m=a(10),d=a.n(m),g=a(23),f=a(4),h=a(66),E=a(129).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"06b4f120-b488-4502-9eec-c59462b88a84"}}),_={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return E.get("users?count=".concat(t,"&page=").concat(e)).then((function(e){return e.data}))},follow:function(e){return E.post("follow/".concat(e),{}).then((function(e){return e.data}))},unfollow:function(e){return E.delete("follow/".concat(e)).then((function(e){return e.data}))},getProfile:function(e){return console.warn("Obsolete methed. Please use profileAPI method"),b.getProfile(e)}},b={getProfile:function(e){return E.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return E.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return E.put("profile/status",{status:e}).then((function(e){if(0===e.data.resultCode)return e.data}))}},v=function(){return E.get("auth/me").then((function(e){return e.data}))},O=function(e,t,a){return E.post("auth/login",{email:e,password:t,rememberMe:a}).then((function(e){return e.data}))},A=function(){return E.delete("auth/login").then((function(e){if(0===e.data.resultCode)return e.data}))},P={userId:null,email:null,login:null,isFetching:!1,isAuth:!1,isRequesting:!1},S=function(e){return{type:"auth/SET_IS_FETCHING",isFetching:e}},w=function(e){return{type:"auth/SET_IS_REQUESTING",isRequesting:e}},j=function(e,t,a,n){return{type:"auth/SET_USER_DATA",data:{userId:e,email:t,login:a,isAuth:n}}},T=function(){return function(){var e=Object(g.a)(d.a.mark((function e(t){var a,n,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(S(!0)),e.next=3,v();case 3:0===(a=e.sent).resultCode&&(n=a.data,r=n.id,s=n.email,o=n.login,t(j(r,s,o,!0))),t(S(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":return Object(f.a)(Object(f.a)({},e),t.data);case"auth/SET_IS_FETCHING":return Object(f.a)(Object(f.a)({},e),{},{isFetching:t.isFetching});case"auth/SET_IS_REQUESTING":return Object(f.a)(Object(f.a)({},e),{},{isRequesting:t.isRequesting});default:return e}},N=a(13),y=a(56),C=a.n(y),L=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isLogoutOpen:!1},n}return Object(c.a)(a,[{key:"onLoginClick",value:function(){this.setState({isLogoutOpen:!this.state.isLogoutOpen})}},{key:"logout",value:function(){this.props.logout()}},{key:"render",value:function(){return r.a.createElement("div",{className:C.a.userLogin},r.a.createElement("span",{onClick:this.onLoginClick.bind(this)},this.props.login),this.state.isLogoutOpen?r.a.createElement("div",{onClick:this.logout.bind(this),className:C.a.logout},"Logout"):null)}}]),a}(r.a.Component),U=function(e){return r.a.createElement("header",{className:C.a.header},r.a.createElement("img",{className:C.a.img,src:"https://is4-ssl.mzstatic.com/image/thumb/Purple113/v4/ee/91/eb/ee91ebc6-f7e6-2fa2-356e-d5930900691b/AppIcon-0-0-1x_U007emarketing-0-0-0-7-0-0-sRGB-0-0-0-GLES2_U002c0-512MB-85-220-0-0.png/1200x630wa.png"}),r.a.createElement(L,{login:e.login,logout:e.logout}))},I=a(9),F=a(131),x=a.n(F),R=a(39),W=a.n(R),M=a(93),z=function(e){var t=Object(n.useState)(!1),a=Object(M.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(e.status),u=Object(M.a)(i,2),c=u[0],l=u[1];Object(n.useEffect)((function(){l(e.status)}),[e.status]);return r.a.createElement("div",{className:W.a.statusWrapper},s?r.a.createElement("textarea",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),e.updateStatus(c)},className:W.a.statusText+" "+W.a.statusInput,value:c}):r.a.createElement("span",{onDoubleClick:function(){e.profileUser||o(!0)},className:W.a.statusText},c||"Click twice to add status"))},G=function(e){return r.a.createElement("div",{className:W.a.img},r.a.createElement("div",null,"Must be IMG"),r.a.createElement(z,{status:e.status?e.status:"",setStatus:e.setStatus,updateStatus:e.updateStatus,currentUser:e.currentUser,profileUser:e.profileUser}))},D=a(27),V=a.n(D),B=function(e){return r.a.createElement("div",{className:V.a.profile__avatar},r.a.createElement("img",{className:V.a.avatar,src:e.profile.photos.large}),r.a.createElement("div",{className:V.a.fullName},r.a.createElement("span",null,e.profile.fullName)),r.a.createElement("div",{className:V.a.lookFJ},r.a.createElement("span",{className:V.a.bold},"Looking for a job: "),r.a.createElement("span",null,e.profile.lookingForAJob?"Yes":"No")),r.a.createElement("div",{className:V.a.lookFJD},r.a.createElement("span",null,e.profile.lookingForAJobDescription)),r.a.createElement("div",{className:V.a.aboutMe},r.a.createElement("span",{className:V.a.bold},"About me: "),r.a.createElement("span",null,e.profile.aboutMe)))},J=a(46),q="profile/ADD-POST",X={posts:[],newPostText:"",profile:null,isFetching:!1,status:""},Y=function(e){return{type:"profile/TOOGLE_IS_FETCHING",isFetching:e}},H=function(e){return{type:"profile/SET_STATUS",status:e}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:var a={id:e.posts.length+1,message:e.newPostText,likesCount:0};return Object(f.a)(Object(f.a)({},e),{},{posts:[].concat(Object(J.a)(e.posts),[a]),newPostText:""});case"profile/UPDATE-NEW-POST-TEXT":return Object(f.a)(Object(f.a)({},e),{},{newPostText:t.newText});case"profile/SET_USER_PROFILE":return Object(f.a)(Object(f.a)({},e),{},{profile:t.profile});case"profile/TOOGLE_IS_FETCHING":return Object(f.a)(Object(f.a)({},e),{},{isFetching:t.isFetching});case"profile/SET_STATUS":return Object(f.a)(Object(f.a)({},e),{},{status:t.status});case"profile/DELETE_POST":return Object(f.a)(Object(f.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.postId}))});default:return e}},K=a(40),Q=a.n(K),$=a(132),ee=a.n($),te=function(e){return r.a.createElement("div",{className:ee.a.post},e.message,r.a.createElement("span",null,e.likes," like"))},ae=r.a.memo((function(e){var t=e.posts.map((function(e){return r.a.createElement(te,{key:e.id,message:e.message,likes:e.likesCount})})),a=function(){e.addPost()};return console.log("render"),r.a.createElement("div",{className:Q.a.wrapper},r.a.createElement("div",{className:Q.a.post},r.a.createElement("h2",null,"Add new post"),r.a.createElement("div",{className:Q.a.posts__new},r.a.createElement("textarea",{onKeyDown:function(e){"Enter"===e.key&&a()},onChange:function(t){var a=t.currentTarget.value;e.updateNewPostText(a)},className:Q.a.addPostArea,value:e.newPostText,placeholder:"Enter new post..."}),r.a.createElement("button",{onClick:a,className:Q.a.postBtn},r.a.createElement("span",null,"\u203a")))),r.a.createElement("div",{className:Q.a.posts__wrapper},t.reverse()))})),ne=Object(N.b)((function(e){return{newPostText:e.profilePage.newPostText,posts:e.profilePage.posts}}),(function(e){return{addPost:function(){e({type:q})},updateNewPostText:function(t){e({type:"profile/UPDATE-NEW-POST-TEXT",newText:t})}}}))(ae),re=a(133),se=a.n(re),oe=function(e){return r.a.createElement("div",{className:se.a.lds_ellipsis},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},ie=function(e){return!e.profile||e.isFetching?r.a.createElement(oe,null):r.a.createElement("div",{className:x.a.profile},r.a.createElement(G,{status:e.status,currentUser:e.userId,profileUser:e.match.params.userId,setStatus:e.setStatus,updateStatus:e.updateStatus}),r.a.createElement(B,{profile:e.profile}),r.a.createElement(ne,null))},ue=a(8),ce=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentWillMount",value:function(){this.props.getUser(this.props.match.params.userId,this.props.userId),this.props.getStatus(this.props.match.params.userId||this.props.userId)}},{key:"render",value:function(){return r.a.createElement(ie,Object.assign({},this.props,{profile:this.props.profile}))}}]),a}(r.a.Component),le=Object(ue.compose)(Object(N.b)((function(e){return{profile:e.profilePage.profile,isFetching:e.profilePage.isFetching,userId:e.auth.userId,status:e.profilePage.status}}),{getUser:function(e,t){return function(){var a=Object(g.a)(d.a.mark((function a(n){var r,s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(r=e)||(r=t),n(Y(!0)),a.next=5,_.getProfile(r);case 5:(s=a.sent)&&n({type:"profile/SET_USER_PROFILE",profile:s}),n(Y(!1));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(g.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getStatus(e);case 2:(n=t.sent)&&a(H(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(g.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.updateStatus(e);case 2:0===t.sent.resultCode&&a(H(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setStatus:H}),I.g)(ce),pe=function(e,t,a,n){return e.map((function(e){return e[a]==t?Object(f.a)(Object(f.a)({},e),n):e}))},me="users/FOLLOW",de={users:[],pageSize:20,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},ge=function(e){return{type:me,userId:e}},fe=function(e){return{type:"users/UNFOLLOW",userId:e}},he=function(e){return{type:"users/SET_USERS",users:e}},Ee=function(e){return{type:"users/SET_CURRENT_PAGE",currentPage:e}},_e=function(e){return{type:"users/TOGGLE_IS_FETCHING",isFetching:e}},be=function(e,t){return{type:"users/TOGGLE_FOLOWING_PROGRESS",followingInProgress:e,userId:t}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(f.a)(Object(f.a)({},e),{},{users:pe(e.users,t.userId,"id",{followed:!0})});case"users/UNFOLLOW":return Object(f.a)(Object(f.a)({},e),{},{users:pe(e.users,t.userId,"id",{followed:!1})});case"users/SET_USERS":return Object(f.a)(Object(f.a)({},e),{},{users:t.users});case"users/SET_CURRENT_PAGE":return Object(f.a)(Object(f.a)({},e),{},{currentPage:t.currentPage});case"users/SET_TOTAL_USERS_COUNT":return Object(f.a)(Object(f.a)({},e),{},{totalUsersCount:t.pageCount});case"users/TOGGLE_IS_FETCHING":return Object(f.a)(Object(f.a)({},e),{},{isFetching:t.isFetching});case"users/TOGGLE_FOLOWING_PROGRESS":return Object(f.a)(Object(f.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(J.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},Oe=a(70),Ae=a(19),Pe=a.n(Ae),Se=a(24),we=a.n(Se),je=a(134),Te=a.n(je),ke=a(16),Ne=function(e){return r.a.createElement("div",{className:we.a.userContainer},r.a.createElement("div",{className:we.a.avatar},r.a.createElement(ke.b,{to:"/profile/"+e.user.id},r.a.createElement("img",{className:we.a.avatar_img,src:e.user.photos.small?e.user.photos.small:Te.a,alt:"avatar"}))),r.a.createElement("div",{className:we.a.infoContainer},r.a.createElement("div",{className:we.a.data},r.a.createElement("span",null,e.user.name),r.a.createElement("span",null)),r.a.createElement("div",{className:we.a.status},e.user.status),e.user.followed?r.a.createElement("button",{disabled:e.followingInProgress.some((function(t){return t==e.user.id})),onClick:function(){e.setFollowing(!1,e.user.id)},className:we.a.followBtn+" "+we.a.unsubscribe},"Unfollow"):r.a.createElement("button",{disabled:e.followingInProgress.some((function(t){return t==e.user.id})),onClick:function(){e.setFollowing(!0,e.user.id)},className:we.a.followBtn+" "+we.a.subscribe},"Follow")))},ye=function(e){var t,a,n,s=Math.ceil(e.totalUsersCount/e.pageSize),o=[];switch(e.currentPage){case 1:case 2:case 3:t=1,a=6;break;case s:t=s-5,a=s;break;case s-1:t=s-5,a=s+1;break;case s-2:t=s-5,a=s+2;break;default:t=e.currentPage-2,a=e.currentPage+2}for(var i=1;i<=s;i++)o.push(i);return r.a.createElement(r.a.Fragment,null,o.map((function(o){return o>=t&&o<=a?r.a.createElement("div",{key:o,className:e.currentPage===o?Pe.a.selectedPage+" "+Pe.a.page:Pe.a.page,onClick:function(t){e.onPageChanged(o)}},o):1===o||o===s?(n=1===o?Pe.a.startPage:Pe.a.endPage,r.a.createElement("div",{key:o,className:e.currentPage===o?Pe.a.selectedPage+" "+Pe.a.page:Pe.a.page+" "+n,onClick:function(t){e.onPageChanged(o)}},o)):void 0})))},Ce=function(e){var t=e.totalUsersCount,a=e.pageSize,n=e.currentPage,s=e.onPageChanged,o=Object(Oe.a)(e,["totalUsersCount","pageSize","currentPage","onPageChanged"]);return r.a.createElement("div",{className:Pe.a.users,key:"users"},r.a.createElement("div",{className:Pe.a.pagesCountWrapper},r.a.createElement(ye,{totalUsersCount:t,pageSize:a,currentPage:n,onPageChanged:s})),r.a.createElement("div",null,o.isFetching?r.a.createElement(oe,null):o.users.map((function(e){return r.a.createElement(Ne,{key:e.id,user:e,followingInProgress:o.followingInProgress,setFollowing:o.setFollowing})}))))},Le=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"onPageChanged",value:function(e){e==this.props.currentPage||this.props.isFetching||this.props.getUsers(e,this.props.pageSize)}},{key:"render",value:function(){return r.a.createElement(Ce,{users:this.props.users,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged.bind(this),pageSize:this.props.pageSize,totalUsersCount:this.props.totalUsersCount,isFetching:this.props.isFetching,followingInProgress:this.props.followingInProgress,setFollowing:this.props.setFollowing})}}]),a}(r.a.Component),Ue=Object(ue.compose)(Object(N.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{setUsers:he,setCurrentPage:Ee,getUsers:function(e,t){return function(){var a=Object(g.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(_e(!0)),n(Ee(e)),a.next=4,_.getUsers(e,t);case 4:(r=a.sent).error||(n(_e(!1)),n(he(r.items)),n({type:"users/SET_TOTAL_USERS_COUNT",pageCount:r.totalCount}));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setFollowing:function(e,t){return function(){var a=Object(g.a)(d.a.mark((function a(n){var r,s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e?_.follow:_.unfollow,s=e?ge:fe,n(be(!0,t)),a.next=5,r(t);case 5:0==a.sent.resultCode&&n(s(t)),n(be(!1,t));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}))(Le),Ie=a(11),Fe=a.n(Ie),xe=function(e){return r.a.createElement("nav",{className:Fe.a.navbar},r.a.createElement("div",{className:Fe.a.links},r.a.createElement(ke.b,{className:Fe.a.links_link,activeClassName:Fe.a.active,to:"/profile"},"\u263b")),r.a.createElement("div",{className:Fe.a.links},r.a.createElement(ke.b,{className:Fe.a.links_link,activeClassName:Fe.a.active,to:"/dialogs"},"\u27a4")),r.a.createElement("div",{className:Fe.a.links},r.a.createElement(ke.b,{className:Fe.a.links_link,activeClassName:Fe.a.active,to:"/users"},"\u262e")),r.a.createElement("div",{className:Fe.a.links},r.a.createElement(ke.b,{className:Fe.a.links_link,activeClassName:Fe.a.active,to:"/news"},"\u2630")),r.a.createElement("div",{className:Fe.a.links},r.a.createElement(ke.b,{className:Fe.a.links_link,activeClassName:Fe.a.active,to:"/settings"},"\u2699")))},Re=r.a.lazy((function(){return a.e(3).then(a.bind(null,299))})),We=r.a.lazy((function(){return a.e(4).then(a.bind(null,297))})),Me=r.a.lazy((function(){return a.e(5).then(a.bind(null,298))})),ze=function(e){return r.a.createElement("div",null,r.a.createElement(U,{login:e.login,logout:e.logout}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(oe,null)},r.a.createElement(I.d,null,r.a.createElement(I.b,{key:"dialogs",path:"/dialogs",render:function(){return r.a.createElement(Re,null)}})," ",r.a.createElement(I.b,{key:"news",path:"/news",component:We}),r.a.createElement(I.b,{key:"settings",path:"/settings",component:Me}))),r.a.createElement(I.b,{key:"profile",path:"/profile/:userId?",render:function(){return r.a.createElement(le,null)}}),r.a.createElement(I.b,{key:"users",path:"/users",render:function(){return r.a.createElement(Ue,null)}}),r.a.createElement(I.b,{key:"/",exact:!0,path:"/network/",render:function(){return r.a.createElement(I.a,{to:"/profile"})}}))),r.a.createElement(xe,null))},Ge=a(20),De=a.n(Ge),Ve=a(126),Be=a(127),Je=function(e){return e?void 0:"field is required"},qe=(s=100,function(e){if(e.length>s)return"Max length is ".concat(s," symbols")}),Xe=function(e){var t=e.input,a=(e.metam,Object(Oe.a)(e,["input","metam"])),n=a.meta.touched&&a.meta.error?De.a.error:"";return r.a.createElement("input",Object.assign({className:De.a.inputs+" "+n},t,a))},Ye=Object(Be.a)({form:"login"})((function(e){return r.a.createElement("form",{className:De.a.form,onSubmit:e.handleSubmit},r.a.createElement("span",{className:De.a.loginText},"Welcome to my social network"),e.error?r.a.createElement("span",{className:De.a.errorLogin},e.error):null,r.a.createElement(Ve.a,{type:"email",name:"login",placeholder:"Login",component:Xe,validate:[Je,qe]}),r.a.createElement(Ve.a,{type:"password",name:"password",placeholder:"Password",component:Xe,validate:[Je,qe]}),r.a.createElement("div",{className:De.a.checkbox},r.a.createElement(Ve.a,{type:"checkbox",name:"rememberMe",component:"input"})," remember me"),r.a.createElement("button",{className:De.a.submitBtn+" "+De.a.inputs},"Login"))})),He=a(136),Ze=a.n(He),Ke=function(e){return r.a.createElement("div",{className:Ze.a.linePreloader})},Qe=function(e){var t={width:"100vw",height:"100vh",backgroundImage:"url("+e.bgimg+")",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return e.isFetching?null:r.a.createElement("div",{className:De.a.loginWrapper,style:t},r.a.createElement("div",{className:De.a.loginFormWrapper},r.a.createElement(Ye,{onSubmit:function(t){e.setLogin(t)}}),e.isRequesting?r.a.createElement(Ke,null):null))},$e=a(137),et=a.n($e),tt=function(e){return e.auth.isAuth},at=function(e){return e.auth.isFetching},nt=function(e){return e.auth.login},rt=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentWillMount",value:function(){this.props.setAuth()}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.isAuth?r.a.createElement(ze,this.props):r.a.createElement(Qe,{isRequesting:this.props.isRequesting,isFetching:this.props.isFetching,setLogin:this.props.setLogin,bgimg:et.a}))}}]),a}(r.a.Component),st=Object(ue.compose)(Object(N.b)((function(e){return{isAuth:tt(e),isFetching:at(e),login:nt(e),isRequesting:e.auth.isRequesting}}),{setAuth:T,setLogin:function(e){return function(){var t=Object(g.a)(d.a.mark((function t(a){var n,r,s,o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(w(!0)),n=e.login,r=e.password,s=e.rememberMe,t.next=4,O(n,r,s);case 4:0===(o=t.sent).resultCode?a(T()):(i=o.messages.length>0?o.messages[0]:"Some error.",a(Object(h.a)("login",{_error:i}))),a(w(!1));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(g.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:0===e.sent.resultCode&&t(j(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(rt),ot=a(125),it=a(138),ut=a(128),ct=a(8),lt=ct.createStore,pt=ct.combineReducers,mt=ct.applyMiddleware,dt=ct.compose,gt=lt(pt({profilePage:Z,messagesPage:ot.b,usersPage:ve,auth:k,form:ut.a}),(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||dt)(mt(it.a)));window.storeEE=gt;var ft=gt,ht=function(e){return r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(st,null))},Et=function(e){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(ke.a,null,r.a.createElement(N.a,{store:ft},r.a.createElement(ht,null))))};i.a.render(r.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},39:function(e,t,a){e.exports={img:"MainImg_img__2NRES",statusWrapper:"MainImg_statusWrapper__3_jbP",statusText:"MainImg_statusText__3DF4M",statusInput:"MainImg_statusInput__241rQ"}},40:function(e,t,a){e.exports={wrapper:"MyPosts_wrapper__MPVR8",post:"MyPosts_post__1Q6Cv",posts__new:"MyPosts_posts__new__3RdEY",addPostArea:"MyPosts_addPostArea__2Ohxy",postBtn:"MyPosts_postBtn__6RMpf",posts__wrapper:"MyPosts_posts__wrapper__1B8mE"}},56:function(e,t,a){e.exports={header:"Header_header__3KGda",img:"Header_img__qjB5y",userLogin:"Header_userLogin__2Jh4X",logout:"Header_logout__2bLlD"}},95:function(e,t,a){}},[[164,1,2]]]);
//# sourceMappingURL=main.768099f1.chunk.js.map